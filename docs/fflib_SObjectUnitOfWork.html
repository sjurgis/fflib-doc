<html><head><script type='text/javascript' src='jquery-1.11.1.js'></script><script type='text/javascript' src='CollapsibleList.js'></script><script type='text/javascript' src='ApexDoc.js'></script><link rel='stylesheet' type='text/css' href='ApexDoc.css' /> </head><body><div class='topsection'><table><tr><td><img src='apex_doc_logo.png' style='border:1px solid #000;'/></td><td><h2 style='margin:0px;'>Project Demo</h2>Check out the gitHub project at:<br/><a href='http://github.com/SalesforceFoundation/ApexDoc'>http://github.com/SalesforceFoundation/ApexDoc</a><br/></td></tr></table></div><table width='100%'><tr><td colspan='2' style='text-align: center;' >Show: <input type='checkbox' checked='checked' id='cbxglobal' onclick='ToggleScope("global", this.checked );'>global</input>&nbsp;&nbsp;<input type='checkbox' checked='checked' id='cbxpublic' onclick='ToggleScope("public", this.checked );'>public</input>&nbsp;&nbsp;<input type='checkbox' checked='checked' id='cbxwebService' onclick='ToggleScope("webService", this.checked );'>webService</input>&nbsp;&nbsp;</td></tr><tr style='vertical-align:top;' ><td width='20%' vertical-align='top' ><div class='sidebar'><div class='navbar'><nav role='navigation'><ul id='mynavbar'><li id='idMenuindex'><a href='.' onclick="gotomenu('index.html', event);return false;" class='nav-item'>Home</a></li><li class='header' id='idMenunull'><a class='nav-item nav-section-title' href='.' onclick="gotomenu(document.location.href, event);return false;" class='nav-item'>Core<span class='caret'></span></a></li><ul><li class='subitem classscopepublic' id='idMenufflib_Answer'><a href='.' onclick="gotomenu('fflib_Answer.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_Answer</a></li><li class='subitem classscopepublic' id='idMenufflib_AnyOrder'><a href='.' onclick="gotomenu('fflib_AnyOrder.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_AnyOrder</a></li><li class='subitem classscopepublic' id='idMenufflib_ApexMocks'><a href='.' onclick="gotomenu('fflib_ApexMocks.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_ApexMocks</a></li><li class='subitem classscopepublic' id='idMenufflib_ArgumentCaptor'><a href='.' onclick="gotomenu('fflib_ArgumentCaptor.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_ArgumentCaptor</a></li><li class='subitem classscopepublic' id='idMenufflib_InOrder'><a href='.' onclick="gotomenu('fflib_InOrder.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_InOrder</a></li><li class='subitem classscopepublic' id='idMenufflib_InvocationOnMock'><a href='.' onclick="gotomenu('fflib_InvocationOnMock.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_InvocationOnMock</a></li><li class='subitem classscopepublic' id='idMenufflib_MethodCountRecorder'><a href='.' onclick="gotomenu('fflib_MethodCountRecorder.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MethodCountRecorder</a></li><li class='subitem classscopepublic' id='idMenufflib_MethodReturnValue'><a href='.' onclick="gotomenu('fflib_MethodReturnValue.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MethodReturnValue</a></li><li class='subitem classscopepublic' id='idMenufflib_MethodReturnValueRecorder'><a href='.' onclick="gotomenu('fflib_MethodReturnValueRecorder.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MethodReturnValueRecorder</a></li><li class='subitem classscopepublic' id='idMenufflib_MethodVerifier'><a href='.' onclick="gotomenu('fflib_MethodVerifier.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MethodVerifier</a></li><li class='subitem classscopepublic' id='idMenufflib_QualifiedMethodAndArgValues'><a href='.' onclick="gotomenu('fflib_QualifiedMethodAndArgValues.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_QualifiedMethodAndArgValues</a></li><li class='subitem classscopepublic' id='idMenufflib_System'><a href='.' onclick="gotomenu('fflib_System.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_System</a></li><li class='subitem classscopepublic' id='idMenufflib_VerificationMode'><a href='.' onclick="gotomenu('fflib_VerificationMode.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_VerificationMode</a></li></ul><li class='header' id='idMenunull'><a class='nav-item nav-section-title' href='.' onclick="gotomenu(document.location.href, event);return false;" class='nav-item'>Miscellaneous<span class='caret'></span></a></li><ul><li class='subitem classscopepublic' id='idMenuBasicAnswer'><a href='.' onclick="gotomenu('BasicAnswer.html', event);return false;" class='nav-item sub-nav-item scopepublic'>BasicAnswer</a></li><li class='subitem classscopepublic' id='idMenufflib_ApexMocksUtils'><a href='.' onclick="gotomenu('fflib_ApexMocksUtils.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_ApexMocksUtils</a></li><li class='subitem classscopepublic' id='idMenufflib_ApexMocksUtilsTest'><a href='.' onclick="gotomenu('fflib_ApexMocksUtilsTest.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_ApexMocksUtilsTest</a></li><li class='subitem classscopepublic' id='idMenufflib_Application'><a href='.' onclick="gotomenu('fflib_Application.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_Application</a></li><li class='subitem classscopepublic' id='idMenufflib_IDGenerator'><a href='.' onclick="gotomenu('fflib_IDGenerator.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_IDGenerator</a></li><li class='subitem classscopepublic' id='idMenufflib_IMatcher'><a href='.' onclick="gotomenu('fflib_IMatcher.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_IMatcher</a></li><li class='subitem classscopepublic' id='idMenufflib_Inheritor'><a href='.' onclick="gotomenu('fflib_Inheritor.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_Inheritor</a></li><li class='subitem classscopepublic' id='idMenufflib_InheritorTest'><a href='.' onclick="gotomenu('fflib_InheritorTest.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_InheritorTest</a></li><li class='subitem classscopepublic' id='idMenufflib_ISObjectDomain'><a href='.' onclick="gotomenu('fflib_ISObjectDomain.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_ISObjectDomain</a></li><li class='subitem classscopepublic' id='idMenufflib_ISObjectSelector'><a href='.' onclick="gotomenu('fflib_ISObjectSelector.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_ISObjectSelector</a></li><li class='subitem classscopepublic' id='idMenufflib_ISObjectUnitOfWork'><a href='.' onclick="gotomenu('fflib_ISObjectUnitOfWork.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_ISObjectUnitOfWork</a></li><li class='subitem classscopepublic' id='idMenufflib_Match'><a href='.' onclick="gotomenu('fflib_Match.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_Match</a></li><li class='subitem classscopepublic' id='idMenufflib_MatcherDefinitions'><a href='.' onclick="gotomenu('fflib_MatcherDefinitions.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MatcherDefinitions</a></li><li class='subitem classscopepublic' id='idMenufflib_MatcherDefinitionsTest'><a href='.' onclick="gotomenu('fflib_MatcherDefinitionsTest.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MatcherDefinitionsTest</a></li><li class='subitem classscopepublic' id='idMenufflib_MatchersReturnValue'><a href='.' onclick="gotomenu('fflib_MatchersReturnValue.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MatchersReturnValue</a></li><li class='subitem classscopepublic' id='idMenufflib_MatchTest'><a href='.' onclick="gotomenu('fflib_MatchTest.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MatchTest</a></li><li class='subitem classscopepublic' id='idMenufflib_MethodArgValues'><a href='.' onclick="gotomenu('fflib_MethodArgValues.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MethodArgValues</a></li><li class='subitem classscopepublic' id='idMenufflib_MethodArgValuesTest'><a href='.' onclick="gotomenu('fflib_MethodArgValuesTest.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MethodArgValuesTest</a></li><li class='subitem classscopepublic' id='idMenufflib_Mocks'><a href='.' onclick="gotomenu('fflib_Mocks.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_Mocks</a></li><li class='subitem classscopepublic' id='idMenufflib_MyList'><a href='.' onclick="gotomenu('fflib_MyList.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_MyList</a></li><li class='subitem classscopepublic' id='idMenufflib_QualifiedMethod'><a href='.' onclick="gotomenu('fflib_QualifiedMethod.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_QualifiedMethod</a></li><li class='subitem classscopepublic' id='idMenufflib_QualifiedMethodTest'><a href='.' onclick="gotomenu('fflib_QualifiedMethodTest.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_QualifiedMethodTest</a></li><li class='subitem classscopepublic' id='idMenufflib_QueryFactory'><a href='.' onclick="gotomenu('fflib_QueryFactory.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_QueryFactory</a></li><li class='subitem classscopepublic' id='idMenufflib_SecurityUtils'><a href='.' onclick="gotomenu('fflib_SecurityUtils.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_SecurityUtils</a></li><li class='subitem classscopepublic' id='idMenufflib_SObjectDescribe'><a href='.' onclick="gotomenu('fflib_SObjectDescribe.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_SObjectDescribe</a></li><li class='subitem classscopepublic' id='idMenufflib_SObjectDomain'><a href='.' onclick="gotomenu('fflib_SObjectDomain.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_SObjectDomain</a></li><li class='subitem classscopepublic' id='idMenufflib_SObjectMocks'><a href='.' onclick="gotomenu('fflib_SObjectMocks.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_SObjectMocks</a></li><li class='subitem classscopepublic' id='idMenufflib_SObjectSelector'><a href='.' onclick="gotomenu('fflib_SObjectSelector.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_SObjectSelector</a></li><li class='subitem classscopepublic' id='idMenufflib_SObjectUnitOfWork'><a href='.' onclick="gotomenu('fflib_SObjectUnitOfWork.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_SObjectUnitOfWork</a></li><li class='subitem classscopepublic' id='idMenufflib_StringBuilder'><a href='.' onclick="gotomenu('fflib_StringBuilder.html', event);return false;" class='nav-item sub-nav-item scopepublic'>fflib_StringBuilder</a></li></ul></ul></nav></div></div></div></td><td class='contentTD'><h2 class='section-title'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L54'>fflib_SObjectUnitOfWork</a></h2><div class='classSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L54'>public virtual class fflib_SObjectUnitOfWork</a></div><div class='classDetails'> Copyright (c), FinancialForce.com, inc All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. - Neither the name of the FinancialForce.com, inc nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &#34;AS IS&#34; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. /** Provides an implementation of the Enterprise Application Architecture Unit Of Work, as defined by Martin Fowler http: &#34;When you're pulling data in and out of a database, it's important to keep track of what you've changed; otherwise, that data won't be written back into the database. Similarly you have to insert new objects you create and remove any objects you delete.&#34; &#34;You can change the database with each change to your object model, but this can lead to lots of very small database calls, which ends up being very slow. Furthermore it requires you to have a transaction open for the whole interaction, which is impractical if you have a business transaction that spans multiple requests. The situation is even worse if you need to keep track of the objects you've read so you can avoid inconsistent reads.&#34; &#34;A Unit of Work keeps track of everything you do during a business transaction that can affect the database. When you're done, it figures out everything that needs to be done to alter the database as a result of your work.&#34; In an Apex context this pattern provides the following specific benifits - Applies bulkfication to DML operations, insert, update and delete - Manages a business transaction around the work and ensures a rollback occurs (even when exceptions are later handled by the caller) - Honours dependency rules between records and updates dependent relationships automatically during the commit Please refer to the testMethod's in this class for example usage TODO: Need to complete the 100% coverage by covering parameter exceptions in tests TODO: Need to add some more test methods for more complex use cases and some unexpected (e.g. registerDirty and then registerDeleted)</div><p/><h2 class='subsection-title'>Properties</h2><div class='subsection-container'> <table class='properties' > <tr class='propertyscopepublic'><td class='clsPropertyName'>Record</td><td><div class='clsPropertyDeclaration'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L388'>public SObject Record</a></div><div class='clsPropertyDescription'></div></tr><tr class='propertyscopepublic'><td class='clsPropertyName'>RelatedTo</td><td><div class='clsPropertyDeclaration'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L390'>public SObject RelatedTo</a></div><div class='clsPropertyDescription'></div></tr><tr class='propertyscopepublic'><td class='clsPropertyName'>RelatedToField</td><td><div class='clsPropertyDeclaration'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L389'>public Schema.sObjectField RelatedToField</a></div><div class='clsPropertyDescription'></div></tr></table></div><p/><h2 class='subsection-title'>Methods</h2><div class='subsection-container'> <ul class='methodTOC'><li class='methodscopepublic' ><a class='methodTOCEntry' href='#fflib_SObjectUnitOfWork'>fflib_SObjectUnitOfWork</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#fflib_SObjectUnitOfWork'>fflib_SObjectUnitOfWork</a><div class='methodTOCDescription'> Constructs a new UnitOfWork to support work against the given object list</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#add'>add</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#commitWork'>commitWork</a><div class='methodTOCDescription'> Takes all the work that has been registered with the UnitOfWork and commits it to the database</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#doWork'>doWork</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#onCommitWorkFinished'>onCommitWorkFinished</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#onCommitWorkFinishing'>onCommitWorkFinishing</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#onCommitWorkStarting'>onCommitWorkStarting</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#onDMLFinished'>onDMLFinished</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#onDMLStarting'>onDMLStarting</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#onDoWorkFinished'>onDoWorkFinished</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#onDoWorkStarting'>onDoWorkStarting</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#onRegisterType'>onRegisterType</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerDeleted'>registerDeleted</a><div class='methodTOCDescription'> Register an existing record to be deleted during the commitWork method</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerDeleted'>registerDeleted</a><div class='methodTOCDescription'> Register a list of existing records to be deleted during the commitWork method</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerDirty'>registerDirty</a><div class='methodTOCDescription'> Register an existing record to be updated during the commitWork method</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerDirty'>registerDirty</a><div class='methodTOCDescription'> Register an existing record to be updated when commitWork is called, you may also provide a reference to the parent record instance (should also be registered as new separatly)</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerDirty'>registerDirty</a><div class='methodTOCDescription'> Register a list of existing records to be updated during the commitWork method</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerEmail'>registerEmail</a><div class='methodTOCDescription'> Registers the given email to be sent during the commitWork</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerEmail'>registerEmail</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerNew'>registerNew</a><div class='methodTOCDescription'> Register a newly created SObject instance to be inserted when commitWork is called</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerNew'>registerNew</a><div class='methodTOCDescription'> Register a list of newly created SObject instances to be inserted when commitWork is called</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerNew'>registerNew</a><div class='methodTOCDescription'> Register a newly created SObject instance to be inserted when commitWork is called, you may also provide a reference to the parent record instance (should also be registered as new separatly)</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerRelationship'>registerRelationship</a><div class='methodTOCDescription'> Register a relationship between two records that have yet to be inserted to the database. This information will be used during the commitWork phase to make the references only when related records have been inserted to the database.</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#registerWork'>registerWork</a><div class='methodTOCDescription'> Registers the type to be used for DML operations</div></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#resolve'>resolve</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#SendEmailWork'>SendEmailWork</a><div class='methodTOCDescription'> Internal implementation of Messaging.sendEmail, see outer class registerEmail method</div></li></ul><div class='methodscopepublic' ><h2 class='methodHeader'><a id='fflib_SObjectUnitOfWork'/>fflib_SObjectUnitOfWork</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L111'>public fflib_SObjectUnitOfWork(List&#60;Schema.SObjectType&#62; sObjectTypes, IDML dml)</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='fflib_SObjectUnitOfWork'/>fflib_SObjectUnitOfWork</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L105'>public fflib_SObjectUnitOfWork(List&#60;Schema.SObjectType&#62; sObjectTypes)</a></div><div class='methodDescription'> Constructs a new UnitOfWork to support work against the given object list</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>sObjectList</div><div class='paramDescription'>A list of objects given in dependency order (least dependent first)</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='add'/>add</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L375'>public void add(SObject record, Schema.sObjectField relatedToField, SObject relatedTo)</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='commitWork'/>commitWork</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L308'>public void commitWork()</a></div><div class='methodDescription'> Takes all the work that has been registered with the UnitOfWork and commits it to the database</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='doWork'/>doWork</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L415'>public void doWork()</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='onCommitWorkFinished'/>onCommitWorkFinished</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L134'>public virtual void onCommitWorkFinished(Boolean wasSuccessful)</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='onCommitWorkFinishing'/>onCommitWorkFinishing</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L133'>public virtual void onCommitWorkFinishing()</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='onCommitWorkStarting'/>onCommitWorkStarting</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L128'>public virtual void onCommitWorkStarting()</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='onDMLFinished'/>onDMLFinished</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L130'>public virtual void onDMLFinished()</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='onDMLStarting'/>onDMLStarting</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L129'>public virtual void onDMLStarting()</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='onDoWorkFinished'/>onDoWorkFinished</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L132'>public virtual void onDoWorkFinished()</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='onDoWorkStarting'/>onDoWorkStarting</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L131'>public virtual void onDoWorkStarting()</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='onRegisterType'/>onRegisterType</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L127'>public virtual void onRegisterType(Schema.SObjectType sObjectType)</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerDeleted'/>registerDeleted</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L282'>public void registerDeleted(SObject record)</a></div><div class='methodDescription'> Register an existing record to be deleted during the commitWork method</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>record</div><div class='paramDescription'>An existing record</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerDeleted'/>registerDeleted</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L297'>public void registerDeleted(List&#60;SObject&#62; records)</a></div><div class='methodDescription'> Register a list of existing records to be deleted during the commitWork method</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>records</div><div class='paramDescription'>A list of existing records</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerDirty'/>registerDirty</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L234'>public void registerDirty(SObject record)</a></div><div class='methodDescription'> Register an existing record to be updated during the commitWork method</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>record</div><div class='paramDescription'>An existing record</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerDirty'/>registerDirty</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L252'>public void registerDirty(SObject record, Schema.sObjectField relatedToParentField, SObject relatedToParentRecord)</a></div><div class='methodDescription'> Register an existing record to be updated when commitWork is called, you may also provide a reference to the parent record instance (should also be registered as new separatly)</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>record</div><div class='paramDescription'>A newly created SObject instance to be inserted during commitWork</div><div class='paramName'>relatedToParentField</div><div class='paramDescription'>A SObjectField reference to the child field that associates the child record with its parent</div><div class='paramName'>relatedToParentRecord</div><div class='paramDescription'>A SObject instance of the parent record (should also be registered as new separatly)</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerDirty'/>registerDirty</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L269'>public void registerDirty(List&#60;SObject&#62; records)</a></div><div class='methodDescription'> Register a list of existing records to be updated during the commitWork method</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>records</div><div class='paramDescription'>A list of existing records</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerEmail'/>registerEmail</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L165'>public void registerEmail(Messaging.Email email)</a></div><div class='methodDescription'> Registers the given email to be sent during the commitWork</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerEmail'/>registerEmail</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L410'>public void registerEmail(Messaging.Email email)</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerNew'/>registerNew</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L175'>public void registerNew(SObject record)</a></div><div class='methodDescription'> Register a newly created SObject instance to be inserted when commitWork is called</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>record</div><div class='paramDescription'>A newly created SObject instance to be inserted during commitWork</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerNew'/>registerNew</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L185'>public void registerNew(List&#60;SObject&#62; records)</a></div><div class='methodDescription'> Register a list of newly created SObject instances to be inserted when commitWork is called</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>records</div><div class='paramDescription'>A list of newly created SObject instances to be inserted during commitWork</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerNew'/>registerNew</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L201'>public void registerNew(SObject record, Schema.sObjectField relatedToParentField, SObject relatedToParentRecord)</a></div><div class='methodDescription'> Register a newly created SObject instance to be inserted when commitWork is called, you may also provide a reference to the parent record instance (should also be registered as new separatly)</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>record</div><div class='paramDescription'>A newly created SObject instance to be inserted during commitWork</div><div class='paramName'>relatedToParentField</div><div class='paramDescription'>A SObjectField reference to the child field that associates the child record with its parent</div><div class='paramName'>relatedToParentRecord</div><div class='paramDescription'>A SObject instance of the parent record (should also be registered as new separatly)</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerRelationship'/>registerRelationship</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L221'>public void registerRelationship(SObject record, Schema.sObjectField relatedToField, SObject relatedTo)</a></div><div class='methodDescription'> Register a relationship between two records that have yet to be inserted to the database. This information will be used during the commitWork phase to make the references only when related records have been inserted to the database.</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>record</div><div class='paramDescription'>An existing or newly created record</div><div class='paramName'>relatedToField</div><div class='paramDescription'>A SObjectField referene to the lookup field that relates the two records together</div><div class='paramName'>relatedTo</div><div class='paramDescription'>A SOBject instance (yet to be commited to the database)</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='registerWork'/>registerWork</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L157'>public void registerWork(IDoWork work)</a></div><div class='methodDescription'> Registers the type to be used for DML operations</div><div class='methodSubTitle'>Parameters</div><div class='paramName'>sObjectType</div><div class='paramDescription'>- The type to register</div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='resolve'/>resolve</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L368'>public void resolve()</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='SendEmailWork'/>SendEmailWork</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L405'>public SendEmailWork()</a></div><div class='methodDescription'> Internal implementation of Messaging.sendEmail, see outer class registerEmail method</div></div></div><p/><h2 class='section-title'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L81'>fflib_SObjectUnitOfWork.IDML</a></h2><div class='classSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L81'>public interface IDML</a></div></div><p/><h2 class='subsection-title'>Methods</h2><div class='subsection-container'> <ul class='methodTOC'><li class='methodscope' ><a class='methodTOCEntry' href='#dmlDelete'>dmlDelete</a></li><li class='methodscope' ><a class='methodTOCEntry' href='#dmlInsert'>dmlInsert</a></li><li class='methodscope' ><a class='methodTOCEntry' href='#dmlUpdate'>dmlUpdate</a></li></ul><div class='methodscope' ><h2 class='methodHeader'><a id='dmlDelete'/>dmlDelete</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L85'>void dmlDelete(List&#60;SObject&#62; objList)</a></div></div><div class='methodscope' ><h2 class='methodHeader'><a id='dmlInsert'/>dmlInsert</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L83'>void dmlInsert(List&#60;SObject&#62; objList)</a></div></div><div class='methodscope' ><h2 class='methodHeader'><a id='dmlUpdate'/>dmlUpdate</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L84'>void dmlUpdate(List&#60;SObject&#62; objList)</a></div></div></div><p/><h2 class='section-title'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L76'>fflib_SObjectUnitOfWork.IDoWork</a></h2><div class='classSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L76'>public interface IDoWork</a></div><div class='classDetails'> Interface describes work to be performed during the commitWork method</div><p/><h2 class='subsection-title'>Methods</h2><div class='subsection-container'> <ul class='methodTOC'><li class='methodscope' ><a class='methodTOCEntry' href='#doWork'>doWork</a></li></ul><div class='methodscope' ><h2 class='methodHeader'><a id='doWork'/>doWork</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L78'>void doWork()</a></div></div></div><p/><h2 class='section-title'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L88'>fflib_SObjectUnitOfWork.SimpleDML</a></h2><div class='classSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L88'>public class SimpleDML implements IDML</a></div></div><p/><h2 class='subsection-title'>Methods</h2><div class='subsection-container'> <ul class='methodTOC'><li class='methodscopepublic' ><a class='methodTOCEntry' href='#dmlDelete'>dmlDelete</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#dmlInsert'>dmlInsert</a></li><li class='methodscopepublic' ><a class='methodTOCEntry' href='#dmlUpdate'>dmlUpdate</a></li></ul><div class='methodscopepublic' ><h2 class='methodHeader'><a id='dmlDelete'/>dmlDelete</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L96'>public void dmlDelete(List&#60;SObject&#62; objList)</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='dmlInsert'/>dmlInsert</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L90'>public void dmlInsert(List&#60;SObject&#62; objList)</a></div></div><div class='methodscopepublic' ><h2 class='methodHeader'><a id='dmlUpdate'/>dmlUpdate</h2><div class='methodSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L93'>public void dmlUpdate(List&#60;SObject&#62; objList)</a></div></div></div><p/><h2 class='section-title'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L396'>fflib_SObjectUnitOfWork.UnitOfWorkException</a></h2><div class='classSignature'><a target='_blank' class='hostedSourceLink' href='fflib_SObjectUnitOfWork.cls#L396'>public class UnitOfWorkException extends Exception</a></div><div class='classDetails'> UnitOfWork Exception</div><p/></div></div></div></td></tr></table><hr/><center style='font-size:.8em;'><a href='http://github.com/SalesforceFoundation/ApexDoc' target='_blank'>Powered By ApexDoc</a></center></body></html>